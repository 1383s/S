<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full-Mark Platform | Login</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        /* ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ… Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø§Ù„Ø© */
        :root {
            --light-text: #FFFFFF;
            --green-active: #00F5C4; /* Ù„ÙˆÙ† Ø§Ù„Ù†Ø¬Ø§Ø­ */
            --red-error: #FF4F4F;     /* Ù„ÙˆÙ† Ø§Ù„Ø®Ø·Ø£ */
            --pending: #ffb347;       /* Ù„ÙˆÙ† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
            /* ğŸ’¡ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù„Ø«ÙŠÙ… Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ø¯Ø§ÙƒÙ† (Dark Forest Green) */
            --main-light-green: #08402C; /* Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© ÙˆØ§Ù„Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
            --main-dark-green: #042016;  /* Ø¯Ø±Ø¬Ø© Ø£ØºÙ…Ù‚ Ù„Ù„Ø®Ù„ÙÙŠØ© Ù„Ø¹Ù…Ù„ ØªØ¯Ø±Ø¬ */
            --wave-color-1: #0C241C;    /* Ù„ÙˆÙ† Ø§Ù„Ù…ÙˆØ¬Ø© 1 */
            --wave-color-2: #020A07;    /* Ù„ÙˆÙ† Ø§Ù„Ù…ÙˆØ¬Ø© 2 */
        }

        /* --------------------------
           1. CSS Reset & Base Styles
           -------------------------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Tajawal', sans-serif;
        }

        /* --------------------------
           2. Body & Background (Glassmorphism Base)
           -------------------------- */
        body {
            display: flex;
            flex-direction: column; 
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Ø®Ù„ÙÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø© Ø£Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ† (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… 08402C ÙˆØ¯Ø±Ø¬Ø© Ø£ØºÙ…Ù‚) */
            background: linear-gradient(180deg, var(--main-light-green) 0%, var(--main-dark-green) 100%);
            overflow: hidden;
            position: relative;
            color: var(--light-text);
            padding: 20px;
            padding-bottom: 100px; /* Ù…Ø³Ø§ÙØ© 80 Ø¨ÙŠÙƒØ³Ù„ Ù„Ø­Ø¬Ø² Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù€ Footer Ø§Ù„Ù„ÙŠ Ø«Ø§Ø¨Øª ØªØ­Øª */
        
        }

        /* ØªÙ…ÙˆÙŠØ¬Ø§Øª Ø³ÙÙ„ÙŠØ© (Waves Effect) - ØªÙ… ØªØ­Ø¯ÙŠØ« Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¬Ø© Ù‡Ù†Ø§ */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ù„ÙÙŠØ© Ø§Ù„ØªÙ…ÙˆÙŠØ¬Ø§Øª - ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
            /* Ø§Ù„Ø®Ù„ÙÙŠØ©: 08402C | Ø§Ù„Ù…ÙˆØ¬Ø© 1: 0C241C | Ø§Ù„Ù…ÙˆØ¬Ø© 2: 020A07 */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600"><rect fill="%2308402C" width="1000" height="600"/><g fill="%230C241C"><path d="M0 450c100-50 200-50 300 0s200 50 300 0 200-50 400 0v150H0z"/><path d="M0 480c100-30 200-30 300 0s200 30 300 0 200-30 400 0v120H0z"/></g><g fill="%23020A07"><path d="M0 500c100-20 200-20 300 0s200 20 300 0 200-20 400 0v90H0z"/><path d="M0 540c100-10 200-10 300 0s200 10 300 0 200-10 400 0v60H0z"/></g></svg>');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: bottom center;
            z-index: -1;
            filter: brightness(0.9);
        }

        /* --------------------------
           3. Stars & Shooting Stars Effects
           -------------------------- */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.8) 1px, transparent 1%),
                              radial-gradient(circle at 70% 80%, rgba(255,255,255,0.7) 1px, transparent 1%),
                              radial-gradient(circle at 30% 60%, rgba(255,255,255,0.6) 1px, transparent 1%),
                              radial-gradient(circle at 50% 10%, rgba(255,255,255,0.5) 1px, transparent 1%);
            background-size: 100px 100px, 120px 120px, 80px 80px, 150px 150px;
            background-repeat: repeat;
            opacity: 0.8;
            z-index: -1;
            animation: star-move 60s linear infinite alternate;
        }
        
        @keyframes star-move {
            from { background-position: 0% 0%; }
            to { background-position: 10% 10%; }
        }
        
        .shooting-star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            /* ØªÙˆÙ‡Ø¬ Ø§Ù„Ø´Ù‡Ø§Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© (08402C) */
            box-shadow: 0 0 10px 1px #fff, 0 0 20px 5px #08402C; 
            opacity: 0;
            transform: rotateZ(315deg);
            animation: shoot 5s linear infinite;
            z-index: 1; 
        }

        @keyframes shoot {
            0% { opacity: 0; transform: translate3d(0, 0, 0) rotateZ(315deg); }
            1% { opacity: 1; }
            100% { opacity: 0; transform: translate3d(400px, 400px, 0) rotateZ(315deg); }
        }

.login-card {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 15px;
    /* ğŸ’¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: 40px Ù…Ù† ÙÙˆÙ‚ ÙˆÙŠÙ…ÙŠÙ† ÙˆÙŠØ³Ø§Ø±ØŒ Ùˆ 25px Ù…Ù† Ø£Ø³ÙÙ„ */
    padding: 40px 40px 25px 40px; 
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    width: 90%;
    max-width: 420px; 
    text-align: center;
    animation: fadeIn 1s ease-out;
    color: #ffffff;
    z-index: 10; 
}

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --------------------------
           5. Header & Form Elements (RTL Ready)
           -------------------------- */
        h2 {
            margin-bottom: 30px;
            font-size: 2.2em;
            color: #ffffff;
            font-weight: 700;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
            letter-spacing: 1px;
        }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .input-group input {
            width: 100%;
            padding: 15px 45px 15px 15px; 
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px; 
            color: #ffffff;
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .input-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .input-group input:focus {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--green-active);
            box-shadow: 0 0 0 2px rgba(0, 245, 196, 0.3);
        }

        .input-group .icon {
            position: absolute;
            right: 15px;
            left: auto;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
        }
        
        /* --------------------------
           6. Status Message Box
           -------------------------- */
        #statusMessage {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1em;
            display: none; 
            text-align: center;
            font-weight: 600;
        }
        
        /* --------------------------
           7. Button & Link Style
           -------------------------- */
        .login-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s ease;
            letter-spacing: 0.5px;
            margin-top: 15px;
            
            /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø²Ø± Ø¨Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (ÙŠØ¨Ø¯Ø£ ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ø¯Ø±Ø¬Ø§Øª Ù…Ù† 08402C) */
            background: linear-gradient(90deg, var(--main-light-green), var(--main-dark-green));
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }

        .login-btn:hover {
            /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… ÙˆØªÙˆÙ‡Ø¬ Ø§Ù„Ø¸Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… 08402C */
            background: linear-gradient(90deg, #1A6041, var(--main-dark-green)); /* Ø£Ø®Ø¶Ø± Ø£ÙØªØ­ Ù‚Ù„ÙŠÙ„Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
            box-shadow: 0 7px 25px rgba(8, 64, 44, 0.6); 
            transform: translateY(-2px);
        }
        
        .get-code-link {
            display: block;
            margin-top: 20px;
            font-size: 0.95em;
            color: var(--pending); 
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }
        .get-code-link:hover {
            color: var(--green-active); 
            text-decoration: underline;
        }

        /* --------------------------
           8. Top Code Status Bar (Firebase Active Code Display)
           -------------------------- */
        .top-status-bar {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            
            /* ğŸ’¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·Ø§Ù‹ ÙˆÙ…Ø±ØªØ¨Ø§Ù‹ Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
            display: flex;
            flex-direction: column; /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ (ÙÙˆÙ‚ Ø¨Ø¹Ø¶) */
            justify-content: center; /* ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ */
            align-items: center; /* ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
            text-align: center;
        }

        .status-text {
            font-size: 0.9em;
            font-weight: 500;
            margin-bottom: 10px; /* Ù…Ø³Ø§ÙØ© ØªØ­Øª Ø§Ù„Ù†Øµ Ù„ØªÙØµÙ„Ù‡ Ø¹Ù† Ø§Ù„Ø²Ø± */
        }

        .code-display {
            color: var(--green-active); 
            font-weight: 700;
            font-family: monospace;
            font-size: 1.1em;
            margin-right: 5px;
        }

        .clear-btn {
            background: var(--red-error); 
            color: var(--light-text);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: 0.3s;
            margin-top: 0; /* ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¥Ù„Ù‰ .status-text */
        }
        .clear-btn:hover {
            opacity: 0.8;
            transform: scale(0.98);
        }

        /* --------------------------
           9. Footer Style
           -------------------------- */
        .footer-rights {
            color: rgba(255, 255, 255, 0.5); 
            font-size: 0.8em;
            text-align: center;
            padding: 10px;
            position: absolute; 
            bottom: 0; 
            width: 100%;
            z-index: 5; 
            backdrop-filter: blur(2px); 
            -webkit-backdrop-filter: blur(2px);
        }
        /* --------------------------
           9. Footer Style (ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«)
           -------------------------- */
        .footer-rights {
            /* ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„ÙŠØ­Ù„ Ù…Ø­Ù„Ù‡ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
            display: none !important;
        }

        /* --------------------------
           10. New Developer Footer Style
           -------------------------- */
        /* --------------------------
/* --------------------------
   10. New Developer Footer Style
   -------------------------- */
/* ... developer-footer Ùˆ developer-info Ù‡Ù…Ø§ Ø§Ù„Ù„ÙŠ Ù‡ÙŠØªØ¹Ø¯Ù„ÙˆØ§ ... */
.developer-footer {
    position: fixed; 
    bottom: 10px; 
    width: 100%;
    z-index: 5; 
    padding: 15px 10px;
    background: rgba(0, 0, 0, 0.4); 
    backdrop-filter: blur(2px); 
    -webkit-backdrop-filter: blur(2px);
    
    display: flex;
    justify-content: center;
    align-items: center;
}

.developer-info {
    /* ğŸ’¡ ØªØ¹Ø¯ÙŠÙ„: Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¹Ø´Ø§Ù† ÙŠØ¨Ù‚Ù‰ "Full Mark" Ø«Ù… "Elgiza" */
    display: flex;
    align-items: center;
    color: var(--light-text);
    font-size: 1em;
    font-weight: 600;
    flex-direction: row-reverse; /* Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨ */
    gap: 15px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± */
}

.developed-text {
    /* ğŸ’¡ ØªØ¹Ø¯ÙŠÙ„: Ù†Ø®Ù„ÙŠ Developed By ØªØ¨Ø§Ù† Ø¢Ø®Ø± Ø­Ø§Ø¬Ø© Ø²ÙŠ Ø§Ù„ØµÙˆØ±Ø© */
    order: 1;
    opacity: 0.7;
    margin-right: 5px;
    margin-left: 0; /* Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù€ margin-right Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯ */
}

.developer-name {
    /* ğŸ’¡ ØªØ¹Ø¯ÙŠÙ„: ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙˆÙ‡Ø¬ */
    color: var(--green-active); /* Ù„ÙˆÙ† Highlight Ø²ÙŠ Ù„ÙˆÙ† Ø§Ù„Ù†Ø¬Ø§Ø­ #00F5C4 */
    font-size: 1.5em; /* ÙƒØ¨Ø±Ù†Ø§ Ø§Ù„Ø®Ø· Ù„ÙŠÙƒÙˆÙ† Ø£Ø­Ø±Ù */
    font-weight: 700;
    margin-right: 0; /* Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù€ margin-right Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯ */
    letter-spacing: 0.5px;
    /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙˆÙ‡Ø¬ Ù„ÙŠÙƒÙˆÙ† ÙˆØ§Ø¶Ø­Ù‹Ø§ ÙˆÙ‚ÙˆÙŠÙ‹Ø§ */
    text-shadow: 0 0 15px var(--green-active), 0 0 20px var(--green-active); 
    order: 2; /* Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ§Ù†ÙŠ */
}

.logo-box {
    /* ğŸ’¡ ØªØ¹Ø¯ÙŠÙ„: ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¸Ù„ */
    background-color: var(--main-light-green); /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ù„ÙŠ Ø§Ø®ØªØ±ØªÙŠÙ‡: 08402C */
    color: #fff;
    padding: 7px 20px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù€ Padding */
    border-radius: 8px;
    font-weight: 900; /* Ø®Ø· Ø£Ø«Ù‚Ù„ */
    font-size: 1.1em; /* ÙƒØ¨Ø±Ù†Ø§ Ø®Ø· Ø§Ù„Ù„ÙˆØ¬Ùˆ */
    /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¸Ù„ Ù„ÙŠÙƒÙˆÙ† Ø¨Ø§Ø±Ø² */
    box-shadow: 0 6px 15px rgba(8, 64, 44, 0.9);
    transform: skewX(-5deg); 
    order: 3; /* Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ */
}
/* ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù€ CSS ... */
    </style>
</head>
<body>
    <div class="stars"></div>

    <div class="login-card">
        
        <div id="topCodeStatus" class="top-status-bar">
            </div>

        <h2>Full-Mark Platform</h2>
        <div id="statusMessage" style="display:none;">
            </div>

        <form id="loginForm">
            <div class="input-group">
                <i class="fas fa-lock icon"></i>
                <input type="text" id="activationCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯Ùƒ " pattern="\d{6}" maxlength="6" required>
            </div>

            <button type="submit" id="loginBtn" class="login-btn">
                 ØªÙØ¹ÙŠÙ„ ÙˆØ¯Ø®ÙˆÙ„
            </button>
        </form>

    </div>
    
    <footer class="developer-footer">
    <div class="developer-info">
        
        <span class="developer-name">ELGIZAWY</span>
        <span class="developed-text">Developed By </span>
        <div class="logo-box">Full Mark</div>
    </div>
    </footer>

    <script>
        // ğŸš¨ Configuration - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
        const firebaseConfig = {
          apiKey: "AIzaSyBK6FZF3LW83qaUHBKYTfiVd2Ozrd1Rf2g",
          authDomain: "thanawy-1383.firebaseapp.com",
          databaseURL: "https://thanawy-1383-default-rtdb.firebaseio.com",
          projectId: "thanawy-1383",
          storageBucket: "thanawy-1383.firebasestorage.app",
          messagingSenderId: "1026664406457",
          appId: "1:1026664406457:web:87d71f7e41bef36ba0aa68",
          measurementId: "G-J5R2EFM2D0"
        };
        
        if (typeof firebase === 'undefined' || firebase.apps.length === 0) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.database();

        // ğŸ’¡ ØªØ¹Ø±ÙŠÙ Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const STATUS_MESSAGE = document.getElementById('statusMessage');
        const LOGIN_FORM = document.getElementById('loginForm');
        const LOGIN_BTN = document.getElementById('loginBtn');
        const ACTIVATION_CODE_INPUT = document.getElementById('activationCode');
        const codeStatusDiv = document.getElementById('topCodeStatus'); // Ø´Ø±ÙŠØ· Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¯


        // ğŸ’¡ Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø®Ù„ÙÙŠØ© Ù…ØªØºÙŠØ±Ø©
        function updateStatusMessage(text, type) {
            STATUS_MESSAGE.textContent = text;
            STATUS_MESSAGE.style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ¹
            if (type === 'success') {
                STATUS_MESSAGE.style.background = 'rgba(0, 245, 196, 0.1)'; 
                STATUS_MESSAGE.style.borderColor = 'rgba(0, 245, 196, 0.4)';
                STATUS_MESSAGE.style.border = '1px solid';
                STATUS_MESSAGE.style.color = 'var(--green-active)';
            } else if (type === 'error') {
                STATUS_MESSAGE.style.background = 'rgba(255, 79, 79, 0.1)'; 
                STATUS_MESSAGE.style.borderColor = 'rgba(255, 79, 79, 0.4)';
                STATUS_MESSAGE.style.border = '1px solid';
                STATUS_MESSAGE.style.color = 'var(--red-error)';
            } else if (type === 'pending') {
                STATUS_MESSAGE.style.background = 'rgba(255, 179, 71, 0.1)'; 
                STATUS_MESSAGE.style.borderColor = 'rgba(255, 179, 71, 0.4)';
                STATUS_MESSAGE.style.border = '1px solid';
                STATUS_MESSAGE.style.color = 'var(--pending)';
            }
        }


        // **********************************************
        // ğŸš¨ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: ØªÙˆÙ„ÙŠØ¯ Device ID ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ 
        // **********************************************

        // Ø¯Ø§Ù„Ø© ØªÙˆÙ„ÙŠØ¯ Device ID ÙØ±ÙŠØ¯ Ù„Ù„Ø¬Ù‡Ø§Ø²
        function generateDeviceID() {
             return 'DID-' + Math.random().toString(36).substring(2, 10).toUpperCase() + Date.now().toString(36);
        }

        // 1. Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø£Ùˆ ØªÙˆÙ„ÙŠØ¯ Device ID Ù„Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø­Ø§Ù„ÙŠ
        let localDeviceId = localStorage.getItem('localDeviceId');
        if (!localDeviceId) {
            localDeviceId = generateDeviceID();
            localStorage.setItem('localDeviceId', localDeviceId);
        }

        // 2. Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²
        function clearLocalCode() {
            localStorage.removeItem('activeCode');
            localStorage.removeItem('approved'); 
            
            updateStatusMessage('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­. Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...', 'success');
            LOGIN_BTN.disabled = true;

            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }

        // 3. Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ù…Ø¹ Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)
        const activeCode = localStorage.getItem('activeCode');
        
        // *******************************************************************
        // ğŸ’¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø®Ø²Ù† Ù…Ø­Ù„ÙŠØ§Ù‹ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        // *******************************************************************
        async function checkAutoLoginStatus() {
            if (!activeCode) {
                 // Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ÙƒÙˆØ¯ Ù…Ø³Ø¬Ù„
                codeStatusDiv.innerHTML = `<span class="status-text" style="color:rgba(255, 255, 255, 0.7);">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ Ù…ÙØ­ÙÙˆØ¸ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².</span>`;
                STATUS_MESSAGE.style.display = 'none'; 
                
                // ØªÙØ¹ÙŠÙ„ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø­Ø¯Ø« Ù„Ù€ LOGIN_FORM
                LOGIN_FORM.addEventListener('submit', (e) => {
                    e.preventDefault();
                    checkAndLogin();
                });
                return;
            }

            // 1. Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ
            codeStatusDiv.innerHTML = `
                <span class="status-text">ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span class="code-display">${activeCode}</span></span>
                <button class="clear-btn" onclick="clearLocalCode()">Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</button>
            `;
            LOGIN_FORM.style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙÙˆØ±Ù… Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚/Ø§Ù„Ø¯Ø®ÙˆÙ„

            updateStatusMessage('â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸...', 'pending');

            try {
                const snapshot = await db.ref('approvedStudents/' + activeCode).once('value');
                const data = snapshot.val();
                // Ù†Ø³ØªØ®Ø¯Ù… Date.now() Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
                const now = Date.now(); 
                
                // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø£Ùˆ Ø§Ù„ØªØ¹Ø·ÙŠÙ„
                if (!data || (data.expiry && data.expiry <= now) || data.isBlocked === true) {
                    
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù† Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø£Ùˆ Ù…Ø­Ø¸ÙˆØ±Ø§Ù‹
                    localStorage.removeItem('activeCode');
                    localStorage.removeItem('approved'); 

                    updateStatusMessage('Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ ÙŠØ±Ø¬ÙŠ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ.', 'error');
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙÙˆØ±Ù…
                    LOGIN_FORM.style.display = 'block'; 
                    codeStatusDiv.innerHTML = `<span class="status-text" style="color:rgba(255, 255, 255, 0.7);">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ Ù…ÙØ­ÙÙˆØ¸ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².</span>`;
                    
                    // ØªÙØ¹ÙŠÙ„ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø­Ø¯Ø« Ù„Ù€ LOGIN_FORM Ù…Ø¬Ø¯Ø¯Ø§Ù‹
                    LOGIN_FORM.addEventListener('submit', (e) => {
                        e.preventDefault();
                        checkAndLogin();
                    });

                    return;
                }

                // 3. Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¯ Ø³Ù„ÙŠÙ…: Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                let countdown = 5;
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯
                updateStatusMessage(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹. Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø®Ù„Ø§Ù„: ${countdown} Ø«ÙˆØ§Ù†Ù...`, 'success');

                const countdownInterval = setInterval(() => {
                    countdown--;
                    updateStatusMessage(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹. Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø®Ù„Ø§Ù„: ${countdown} Ø«ÙˆØ§Ù†Ù...`, 'success');
                    
                    if (countdown <= 0) {
                        clearInterval(countdownInterval);
                        window.location.href = 'subjects.html'; // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„Ù„ØµÙØ­Ø©
                    }
                }, 1000); 

            } catch (error) {
                updateStatusMessage('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©. Ø­Ø§ÙˆÙ„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¯ÙˆÙŠØ§Ù‹.', 'error');
                LOGIN_FORM.style.display = 'block';
                console.error("Firebase auto-login error:", error);
                
                // ØªÙØ¹ÙŠÙ„ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø­Ø¯Ø« Ù„Ù€ LOGIN_FORM
                LOGIN_FORM.addEventListener('submit', (e) => {
                    e.preventDefault();
                    checkAndLogin();
                });
            }
        }
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        checkAutoLoginStatus();


        // 4. Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Firebase (Ù„Ù… ÙŠØªÙ… ØªØºÙŠÙŠØ±Ù‡Ø§ØŒ ÙÙ‡ÙŠ ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­)
        async function checkAndLogin() {
            const activationCode = ACTIVATION_CODE_INPUT.value.trim();
            
            if (activationCode.length !== 6 || isNaN(activationCode)) {
                updateStatusMessage('âŒ Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ ØµØ­ÙŠØ­ Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù….', 'error');
                return;
            }

            LOGIN_BTN.disabled = true;
            updateStatusMessage('â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„...', 'pending');

            try {
                const snapshot = await db.ref('approvedStudents/' + activationCode).once('value');
                const data = snapshot.val();
                const now = Date.now();

                if (!data) {
                    updateStatusMessage('âŒ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.', 'error');
                    return;
                }

                // ğŸš¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
                if (data.expiry && data.expiry <= now) {
                    updateStatusMessage('âŒ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©.', 'error');
                    return;
                }
                
                if (data.isBlocked === true) {
                    updateStatusMessage(' Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ ÙŠØ±Ø¬ÙŠ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ.', 'error');
                    return;
                }

                // ğŸš¨ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø´Ø±Ø· Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ÙˆØ§Ø­Ø¯ 
                const storedDeviceId = data.deviceId;

                if (!storedDeviceId) {
                    // Ø§Ù„ÙƒÙˆØ¯ Ø³Ù„ÙŠÙ… ÙˆØ¬Ù‡Ø§Ø² Ø§Ù„Ø·Ø§Ù„Ø¨ Ù‡Ùˆ Ø£ÙˆÙ„ Ø¬Ù‡Ø§Ø² ÙŠØ³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    await db.ref('approvedStudents/' + activationCode + '/deviceId').set(localDeviceId);
                    localStorage.setItem('activeCode', activationCode);
                    localStorage.setItem('approved', 'true');
                    
                    updateStatusMessage('âœ… ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'success');
                    
                    setTimeout(() => {
                        window.location.href = 'subjects.html'; // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    }, 1000);
                    
                } else if (storedDeviceId === localDeviceId) {
                    // Ø§Ù„ÙƒÙˆØ¯ Ø³Ù„ÙŠÙ… ÙˆÙ…ÙØ¹Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø²
                    localStorage.setItem('activeCode', activationCode);
                    localStorage.setItem('approved', 'true');
                    
                    updateStatusMessage('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'success');

                    setTimeout(() => {
                        window.location.href = 'subjects.html'; // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    }, 1000);

                } else {
                    // âŒ Ø§Ù„ÙƒÙˆØ¯ Ø³Ù„ÙŠÙ… Ù„ÙƒÙ† Ù…ÙØ¹Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±
                    updateStatusMessage('âŒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…ÙÙØ¹Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø± Ø¨Ø§Ù„ÙØ¹Ù„.', 'error');
                }

            } catch (error) {
                updateStatusMessage('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'error');
                console.error("Firebase error:", error);
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
                LOGIN_BTN.disabled = false;
            }
        }
        
        // 5. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø¨ Ø¨Ø´ÙƒÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ 
        const body = document.querySelector('body');
        const numStars = 10; 

        for (let i = 0; i < numStars; i++) {
            const star = document.createElement('div');
            star.className = 'shooting-star';

            const startX = Math.random() * window.innerWidth / 2;
            const startY = Math.random() * window.innerHeight / 2;
            star.style.left = `${startX}px`;
            star.style.top = `${startY}px`;

            const delay = Math.random() * 5; 
            star.style.animationDelay = `${delay}s`;

            body.appendChild(star);
        }
    </script>
</body>
</html>















