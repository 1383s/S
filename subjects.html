<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>full mark subjects</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
      <script type="module" src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
    <script type="module" src="devcheck.js"></script>
  <script src="auth.js"></script>
  <style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@200..900&display=swap'); 
/* Ø®Ø· Ø¥Ø¶Ø§ÙÙŠ Ù„Ù€ Cyber/Tech Feel */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap');


:root {
  /* ğŸŸ¢ Ø«ÙˆØ§Ø¨Øª Ø§Ù„Ù€ Cyber Green ÙˆØ§Ù„Ù€ Dark Tech */
  --dark-black: #020A07;           /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ø£Ø³ÙˆØ¯ ÙØ§Ø­Ù… */
  --main-green-bg: #08402C;        /* Ø£Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ† Ù„Ù„Ù€ Cards - Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ */
  --darker-green-bg: #0C241C;      /* Ø£Ø®Ø¶Ø± Ø£ØºÙ…Ù‚ Ù„Ù„Ù€ Topbar/Hover */
  --neon-accent: #27d97e;          /* Ø£Ø®Ø¶Ø± Ù†ÙŠÙˆÙ† Ø³Ø§Ø·Ø¹ */
  --light-text: #f0f0f5;           /* Ù†Øµ ÙØ§ØªØ­ */
  --gray-text: #8e8e8e;            /* Ù†Øµ Ø«Ø§Ù†ÙˆÙŠ */
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 90px 15px 70px;
  font-family: 'Cairo', sans-serif;
  background: var(--dark-black);
  color: var(--light-text);
  margin: 0;
  transition: background 0.4s, color 0.4s;
  overflow-x: hidden;
}

/* ===== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ (Top Bar) - ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ø«Ù„Ø¬ÙŠ/Frosted Glass ===== */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ù…Ù† Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ + Ø²Ø¬Ø§Ø¬ Ø«Ù„Ø¬ÙŠ */
  background: rgba(8, 64, 44, 0.4); 
  backdrop-filter: blur(10px); 
  -webkit-backdrop-filter: blur(10px);
  padding: 10px 15px;
  color: var(--light-text);
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  z-index: 1000;
  transition: background 0.3s, color 0.3s;
  border-bottom: 2px solid var(--neon-accent); /* Ø®Ø· Ø£Ø®Ø¶Ø± Ù†ÙŠÙˆÙ† */
  box-shadow: 0 4px 15px rgba(39, 217, 126, 0.2);
}

.menu-btn {
  font-size: 24px;
  cursor: pointer;
}

.title {
  font-size: 16px;
  color: var(--neon-accent); /* Ù†ÙŠÙˆÙ† Ù„Ø§ÙØª */
  font-family: 'Orbitron', sans-serif; /* Ø®Ø· ØªÙ‚Ù†ÙŠ */
  font-weight: 700;
  letter-spacing: 2px;
  text-shadow: 0 0 8px rgba(39, 217, 126, 0.7);
}

.icons {
  display: flex;
  align-items: center;
  gap: 15px;
}

.icons img {
  width: 28px;
  height: 28px;
  /* ÙÙ„ØªØ± Ø¹Ø´Ø§Ù† ØªØ¨Ù‚Ù‰ Ø´ÙƒÙ„Ù‡Ø§ Ù†ÙŠÙˆÙ† Ø£Ø®Ø¶Ø± */
  filter: invert(1) drop-shadow(0 0 6px var(--neon-accent)); 
  cursor: pointer;
  transition: 0.3s;
}
.icons img:hover {
    filter: invert(1) drop-shadow(0 0 12px var(--neon-accent));
    transform: scale(1.1);
}

/* ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ Toggle - Cyber Switch */
.toggle-dark {
  background: var(--dark-black);
  border: 2px solid var(--neon-accent);
  border-radius: 20px;
  width: 50px;
  height: 25px;
  position: relative;
  cursor: pointer;
  transition: all 0.3s;
}

.toggle-dark::after {
  content: "";
  position: absolute;
  top: 3px;
  right: 3px; 
  width: 15px;
  height: 15px;
  background: var(--neon-accent);
  border-radius: 50%;
  transition: 0.3s;
  box-shadow: 0 0 8px var(--neon-accent);
}

.toggle-dark.active::after {
  right: 27px;
  background: var(--light-text);
  box-shadow: 0 0 8px var(--light-text);
}

/* ===== Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª ===== */
h1 {
  color: var(--neon-accent);
  text-align: center;
  font-size: 3rem;
  margin-bottom: 50px;
  text-shadow: 0 0 15px rgba(39, 217, 126, 0.8); /* Ø¸Ù„ Ù†ÙŠÙˆÙ† Ø£Ø®Ø¶Ø± Ù‚ÙˆÙŠ */
  font-family: 'Orbitron', sans-serif;
  font-weight: 900;
  letter-spacing: 4px;
  text-transform: uppercase;
  /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù€ Glitch Ø§Ù„Ø®ÙÙŠÙ Ù…Ù…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© */
}

ul {
  padding: 0 10px;
  list-style: none;
  
  /* â­ï¸ Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ø´Ø§Ù† ØªØ´ØªØºÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø¨Ù„Øª ÙˆØ§Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨ */
  max-width: 1200px; 
  
  margin: 0 auto; 
  
  /* ğŸ› ï¸ Grid Layout Ø§Ù„Ù„ÙŠ Ø¨ÙŠØªØ¬Ø§ÙˆØ¨ */
  display: grid; 
  /* Default: 3 Ø£Ùˆ 4 Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø­Ø¯ Ø£Ø¯Ù†Ù‰ 250px Ù„Ù„Ø¹Ø±Ø¶ */
  grid-template-columns: repeat(3, minmax(250px, 1fr)); 
  gap: 30px; 
  transform: none; 
}

li {
  /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø§Ø¯Ø© - ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ #08402C */
  background: var(--main-green-bg); 
  border-radius: 15px;
  padding: 30px 25px 30px;
  cursor: pointer;
  border: 1px solid rgba(39, 217, 126, 0.2);
  /* Ø¸Ù„ Ø®ÙÙŠÙ Ù…Ø¹ Ø¥Ø­Ø³Ø§Ø³ Ø§Ù„Ù€ Depth */
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7); 
  transition: background-color 0.4s ease, transform 0.4s ease, box-shadow 0.4s ease;
  
  display: flex;
  flex-direction: column;
  align-items: center; 
  text-align: center;  
  justify-content: space-between;
  user-select: none;
  /* Ø´Ù„Ù†Ø§ Ø§Ù„Ù€ width: 100% Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ Grid ÙŠØ­Ø¯Ø¯ Ø§Ù„Ø¹Ø±Ø¶ ØµØ­ */
  min-height: 250px; 
}

li:hover {
  /* Ø®Ù„ÙÙŠØ© Ø£ØºÙ…Ù‚ Ù„Ù„Ù€ Hover Ù…Ù† Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ #0C241C */
  background: var(--darker-green-bg); 
  color: #fff;
  transform: translateY(-8px) scale(1.03); /* Ø±ÙØ¹ Ø£Ù‚Ù„ ÙˆØ£ÙƒØ«Ø± Ø§Ù†Ø³ÙŠØ§Ø¨ÙŠØ© */
  border-color: var(--neon-accent);
  /* Ø¸Ù„ Ù†ÙŠÙˆÙ† Ø£Ø®Ø¶Ø± Ù‚ÙˆÙŠ Ø¬Ø¯Ø§ */
  box-shadow: 0 15px 40px rgba(39, 217, 126, 0.5); 
}

li:active {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(39, 217, 126, 0.4);
}

.circle {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: var(--darker-green-bg); /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø£ØºÙ…Ù‚ */
  overflow: hidden;
  margin-bottom: 25px;
  border: 4px solid var(--neon-accent);
  box-shadow: 0 0 15px var(--neon-accent);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.4s;
}
li:hover .circle {
  border-color: var(--light-text);
  box-shadow: 0 0 20px var(--light-text);
}

.circle img {
  width: 80%;
  height: 80%;
  object-fit: contain;
  /* ÙÙ„ØªØ± Ù„Ù€ Cyber Glow */
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.7)); 
  transition: all 0.4s;
}

li span {
  font-weight: 700;
  font-size: 1.4rem;
  text-align: center;
  color: var(--light-text);
  transition: color 0.3s;
  text-shadow: 0 0 5px rgba(0,0,0,0.5);
  font-family: 'Tajawal', sans-serif;
}
li:hover span {
    color: var(--neon-accent); 
    text-shadow: 0 0 10px var(--neon-accent);
}

li.loading {
  cursor: default;
  color: var(--gray-text);
  background: var(--dark-black);
  box-shadow: none;
  font-weight: 500;
  font-size: 1.3rem;
  /* ØªØ®Ù„ÙŠÙ‡Ø§ ØªÙ…ØªØ¯ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
  grid-column: 1 / -1; 
  text-align: center;
  margin-top: 30px;
}

li.loading::after {
  content: "";
  width: 35px;
  height: 35px;
  border: 4px solid var(--neon-accent);
  border-top: 4px solid transparent;
  border-radius: 50%;
  display: inline-block;
  margin-right: 15px;
  vertical-align: middle;
  animation: spin 1s cubic-bezier(0.5, 0, 0.5, 1) infinite; 
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ===== ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ (Light Mode) - ØªÙ†Ø§ØºÙ… Ø§Ù„Ø£Ù„ÙˆØ§Ù† (ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„Ù„Ø£Ø®Ø¶Ø±) ===== */
body.light-mode {
  background: #f8fcf8; /* Ø£Ø¨ÙŠØ¶ ÙØ§ØªØ­ Ù…Ø¹ Ù„Ù…Ø³Ø© Ø®Ø¶Ø±Ø§Ø¡ */
  color: #1a1a1a;
}
body.light-mode .topbar {
  background: rgba(255, 255, 255, 0.9);
  color: #1a1a1a;
  border-bottom-color: var(--main-green-bg);
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
body.light-mode li {
  background: #fff;
  color: #1a1a1a;
  box-shadow: 0 2px 15px rgba(0,0,0,0.1);
  border-color: #eee;
}
body.light-mode li:hover {
  background: var(--main-green-bg);
  color: #fff;
  box-shadow: 0 15px 40px rgba(8, 64, 44, 0.4);
}
body.light-mode li span {
  color: #1a1a1a;
}
body.light-mode li:hover span {
  color: var(--neon-accent);
  text-shadow: none;
}
body.light-mode .circle {
  background: #eee;
  border-color: var(--main-green-bg);
  box-shadow: none;
}
body.light-mode li:hover .circle {
  border-color: var(--neon-accent);
  box-shadow: 0 0 20px rgba(39, 217, 126, 0.3);
}
body.light-mode .toggle-dark {
  border-color: var(--main-green-bg);
  background: #fff;
}
body.light-mode .toggle-dark::after {
  background: var(--main-green-bg);
  box-shadow: 0 0 8px var(--main-green-bg);
}
body.light-mode .toggle-dark.active::after {
  background: var(--neon-accent);
  box-shadow: 0 0 8px var(--neon-accent);
}
body.light-mode .icons img {
    filter: none; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù€ filter ÙÙŠ Ø§Ù„Ù€ light mode */
}

/* ===== Toast Ø¥Ø´Ø¹Ø§Ø± (Ø£Ø®Ø¶Ø± ØªÙ‚Ù†ÙŠ) ===== */
#toast {
  visibility: hidden;
  min-width: 300px;
  background: var(--darker-green-bg);
  color: var(--neon-accent);
  text-align: center;
  border-radius: 10px;
  padding: 15px;
  position: fixed;
  z-index: 2000;
  left: 50%;
  bottom: 30px;
  transform: translateX(-50%);
  font-size: 1.1rem;
  border: 1px solid var(--neon-accent);
  box-shadow: 0 0 12px var(--neon-accent), 0 6px 20px rgba(0,0,0,0.7);
  opacity: 0;
  transition: opacity 0.4s, bottom 0.4s;
}
#toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 40px;
}
body.light-mode #toast {
  background: #fff;
  color: var(--main-green-bg);
  border-color: var(--main-green-bg);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* âœ… Ø²Ø± Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø¹Ø§Ø¦Ù… (Ø£Ø®Ø¶Ø± ØªÙ‚Ù†ÙŠ) */
.profile-float-btn {
  position: fixed;
  bottom: 30px;
  left: 30px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: var(--darker-green-bg);
  border: 3px solid var(--neon-accent);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 0 15px var(--neon-accent);
  transition: 0.3s;
  z-index: 1200;
}
.profile-float-btn:hover {
  transform: scale(1.1) rotate(5deg);
  background: var(--main-green-bg);
  box-shadow: 0 0 25px var(--neon-accent); 
}

.profile-float-btn img {
    width: 30px;
    height: 30px;
    filter: invert(1) drop-shadow(0 0 5px var(--neon-accent)); /* Ø¹Ø´Ø§Ù† Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ØªØ¨Ø§Ù† Ù†ÙŠÙˆÙ† */
}
body.light-mode .profile-float-btn {
  background: var(--main-green-bg);
  border: 3px solid #fff;
}
body.light-mode .profile-float-btn:hover {
  background: var(--neon-accent);
  border-color: var(--main-green-bg); 
}
body.light-mode .profile-float-btn img {
    filter: invert(0);
}

/* âœ… ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.home-button {
    background: linear-gradient(90deg, var(--neon-accent), var(--main-green-bg));
    color: #fff;
    padding: 10px 22px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.05rem;
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1100;
    box-shadow: 0 6px 20px rgba(39, 217, 126, 0.4);
    transition: transform 0.3s, opacity 0.3s;
}
.home-button:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 30px rgba(39, 217, 126, 0.7);
}

/* ===== Media Queries Ù„ØªØ¬Ø§ÙˆØ¨ÙŠØ© Ø£ÙØ¶Ù„ (ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§) ===== */

/* â­ï¸ New Media Query for Large Tablets/Small Desktops */
@media (max-width: 1024px) {
    ul {
        /* 2 Ø£Ùˆ 3 Ø£Ø¹Ù…Ø¯Ø© ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰ */
        grid-template-columns: repeat(3, minmax(200px, 1fr));
        gap: 25px;
    }
}

@media (max-width: 768px) {
  h1 {
    font-size: 2.5rem;
  }
  ul {
    /* Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù€ Tablet Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ */
    grid-template-columns: repeat(4, minmax(180px, 1fr));
    gap: 20px;
  }
  .circle {
    width: 100px;
    height: 100px;
  }
  li span {
    font-size: 1.2rem;
  }
  .profile-float-btn {
    width: 50px;
    height: 50px;
    bottom: 20px;
    left: 20px;
  }
}
@media (max-width: 480px) {
    h1 {
        font-size: 1.8rem;
    }
    ul {
        /* Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ - Ø¹Ù…ÙˆØ¯ ÙˆØ§Ø­Ø¯ Ø¹Ø±ÙŠØ¶ ÙˆÙ…Ø±ÙŠØ­ */
        grid-template-columns: 1fr; 
        gap: 15px;
    }
    li {
        min-height: 180px;
        padding: 25px 20px; 
    }
    .circle {
        width: 80px;
        height: 80px;
        margin-bottom: 15px;
    }
    .home-button {
        padding: 8px 15px;
        font-size: 0.9rem;
        top: 15px;
        right: 15px;
    }
    body {
        padding-top: 70px;
    }
}

/* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ù€ HTML Ù„ÙƒÙ† ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø£Ù„ÙˆØ§Ù†Ù‡Ø§ Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯) */
.activation-info-container, .fixed-bottom-bar, .info-label, .activation-code-box, .return-btn, .bottom-label, .bottom-code {
    background: var(--darker-green-bg);
    color: var(--light-text);
    border: 1px solid var(--neon-accent);
}
  </style>
</head>
<body>

  <div class="topbar">
    
    <div class="title">By ELGIZAWY</div>
    <div class="icons">
      <div class="toggle-dark" id="darkToggle"></div>
      <a href="" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp">
      </a>
      <img id="shareBtn" src="https://cdn-icons-png.flaticon.com/512/929/929610.png" alt="Share">
    </div>
  </div>

  <div id="toast">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‡ØªØªÙØ¹Ù„ Ù‚Ø±ÙŠØ¨Ù‹Ø§ ğŸ””âœ¨</div>

  <h1> SUBJECTS 2026 </h1>
  <ul id="subjects-list">
    <li class="loading">â³....ğ‘³ğ’ğ’‚ğ’…ğ’Šğ’ğ’ˆ</li>
  </ul>

  <a href="profile.html" class="profile-float-btn">
    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
  </a>

<script>
// âœ… Toast Ø§Ø­ØªØ±Ø§ÙÙŠØ© â€” Ù†Ø³Ø®Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
function showToast(message, type = "info") {
  const toast = document.createElement("div");
  toast.className = `custom-toast ${type}`;
  toast.innerHTML = `<span>${message}</span>`;

  const style = document.createElement("style");
  // ** ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù€ CSS Ø¨ØªØ§Ø¹ Ø§Ù„Ù€ Toast Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ Neon Green/Dark Theme **
  style.textContent = `
    .custom-toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 14px 22px;
      border-radius: 14px;
      font-family: "Cairo", sans-serif;
      font-weight: 600;
      font-size: 15px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
      animation: slideIn 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
      z-index: 9999;
      border: 1px solid #27d97e;
    }
    .custom-toast.info { background: linear-gradient(135deg, #08402C, #0C241C); }
    .custom-toast.success { background: linear-gradient(135deg, #27d97e, #1a8f54); }
    .custom-toast.error { background: linear-gradient(135deg, #e74c3c, #c0392b); }
    @keyframes slideIn { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes fadeOut { to { opacity: 0; transform: translateX(120%); } }
  `;
  document.head.appendChild(style);
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

// âœ… Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚
window.authPassed = false;
// âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø¹Ø¯Ù„: ØªØ®Ø·ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

document.addEventListener("DOMContentLoaded", async () => {
  // â¬…ï¸ Ù†Ø¹ØªØ¨Ø± Ø¥Ù† Ø§Ù„ØªØ­Ù‚Ù‚ Ù†Ø¬Ø­ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø¹Ø´Ø§Ù† Ù†ØªØ®Ø·Ù‰ Ø§Ù„ÙØ­Øµ
  window.authPassed = true;
  
  // ØªØ´ØºÙŠÙ„ Ø­Ø¯Ø« authReady Ø¹Ø´Ø§Ù† Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ØªØ´ØªØºÙ„
  document.dispatchEvent(new Event("authReady")); 
  
  // Ù…Ù…ÙƒÙ† ØªØ­Ø·ÙŠ Ø±Ø³Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ØªØ£ÙƒØ¯ØŒ Ø£Ùˆ ØªÙ„ØºÙŠ Ø§Ù„Ø³Ø·Ø± Ø¯Ø§ Ù„Ùˆ Ù…Ø´ Ø¹Ø§ÙŠØ²Ø© Ø¥Ø´Ø¹Ø§Ø± ÙŠØ¸Ù‡Ø±
  // showToast("âœ… ØªÙ… ØªØ®Ø·ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­", "success"); 
});
</script>

<script type="module">
// ğŸš¨ ÙƒÙˆÙ†ÙÙŠØ¬ Firebase (ØªØ­ØªØ§Ø¬ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù‡Ù†Ø§)
const firebaseConfig = {
    apiKey: "AIzaSyBK6FZF3LW83qaUHBKYTfiVd2Ozrd1Rf2g",
    authDomain: "thanawy-1383.firebaseapp.com",
    databaseURL: "https://thanawy-1383-default-rtdb.firebaseio.com",
    projectId: "thanawy-1383",
    // ...
};

// ğŸ’¡ ØªÙ‡ÙŠØ¦Ø© Firebase (Ù†Ø­ØªØ§Ø¬ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù‡Ù†Ø§ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø¹Ø¨Ø©)
if (typeof firebase === 'undefined' || firebase.apps.length === 0) {
    firebase.initializeApp(firebaseConfig);
}
const db = firebase.database();


// ğŸŒ ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù€ JSON Ø­Ø³Ø¨ Ø§Ù„Ø´Ø¹Ø¨Ø©
const JSON_URLS = {
    'Ø¹Ù„Ù…ÙŠ Ø¹Ù„ÙˆÙ…': "https://plus-teal.vercel.app/organized_output.json",
    'Ø£Ø¯Ø¨ÙŠ': "https://plus-teal.vercel.app/organized_output-a.json", 
    'Ø¹Ù„Ù…ÙŠ Ø±ÙŠØ§Ø¶Ø©': "https://plus-teal.vercel.app/organized_outputa.json", 
    'Ø£Ø²Ù‡Ø±': "https://plus-teal.vercel.app/organized_outpua.json",
    'DEFAULT': "https://plus-teal.vercel.app/organized_output.json" 
};


// ğŸ”¥ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø¹Ø¨Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù€ URL ğŸ”¥
async function getDataSourceURL() {
    const activeCode = localStorage.getItem('activeCode');
    if (!activeCode) {
        // Ù„Ùˆ Ù…ÙÙŠØ´ ÙƒÙˆØ¯ Ù…ÙØ¹Ù„ØŒ Ø±Ø¬Ù‘Ø¹ Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø£Ùˆ Ø­ÙˆÙ‘Ù„ Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        console.warn("No active code found. Using default URL.");
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ÙƒÙˆØ¯ØŒ ÙŠØ¬Ø¨ ØªØ­ÙˆÙŠÙ„Ù‡ Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        window.location.href = 'index.html'; 
        return JSON_URLS.DEFAULT;
    }

    try {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø´Ø¹Ø¨Ø© Ù…Ù† Firebase
        const snapshot = await db.ref(`approvedStudents/${activeCode}`).once('value');
        const studentData = snapshot.val();

        if (studentData && studentData.section) {
            const studentSection = studentData.section.trim();
            const url = JSON_URLS[studentSection] || JSON_URLS.DEFAULT;
            showToast(`ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø´Ø¹Ø¨ØªÙƒ: ${studentSection}`, "info");
            return url;
        } else {
            showToast("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´Ø¹Ø¨Ø©. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ.", "warn");
            return JSON_URLS.DEFAULT;
        }
    } catch (error) {
        showToast("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø´Ø¹Ø¨Ø©. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ.", "error");
        console.error("Error fetching student section from Firebase:", error);
        return JSON_URLS.DEFAULT;
    }
}


const subjectsList = document.getElementById('subjects-list');

const subjectImages = {
   "Ø£Ø­ÙŠØ§Ø¡": "1.jpg",
    "ÙÙŠØ²ÙŠØ§Ø¡": "2.jpg",
    "ÙƒÙŠÙ…ÙŠØ§Ø¡": "3.jpg",
    "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©": "5.jpg",
    "English": "6.jpg",
    "Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§": "https://www2.0zz0.com/2025/11/03/22/343667596.jpg",
    "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": "4.jpg",
    "ØªØ§Ø±ÙŠØ®": "99.jpg",
    "Ø¬ØºØ±Ø§ÙÙŠØ§": "9.jpg",
    "Ø§Ù„Ø¥Ø­ØµØ§Ø¡": "8.jpg",
    "Ø§Ø¯Ø¨ÙŠ": "https://www2.0zz0.com/2025/10/01/19/580067879.jpeg",
  };
// **Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙˆÙŠØ¬Ø¨ ÙˆØ¶Ø¹Ù‡ Ù…ÙƒØ§Ù† loadSubjects() Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙÙŠ subjects.html**

async function loadSubjects() {
  subjectsList.innerHTML = '<li class="loading">â³....ğ‘³ğ’ğ’‚ğ’…ğ’Šğ’ğ’ˆ</li>';

  // 1. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù€ URL Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ù„Ø¨
  const finalSourceURL = await getDataSourceURL(); 
  
  try {
    const res = await fetch(finalSourceURL); 
    if (!res.ok) throw new Error("Failed to fetch JSON data.");

    const allYearsData = await res.json();

    // ğŸ’¡ Ù†Ø³ØªØ®Ø¯Ù… Map Ù„ØªØ®Ø²ÙŠÙ† ÙƒÙ„ Ù…Ø§Ø¯Ø© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© 
    const uniqueSubjects = new Map();

    (allYearsData || []).forEach(year => {
        const yearId = year.id; 
        const yearName = year.name; 
        
        (year.subjects || []).forEach(sub => {
            if (!uniqueSubjects.has(sub.name)) {
                // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø¹ ID Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù„ÙŠ Ø¸Ù‡Ø±Øª ÙÙŠÙ‡Ø§ (Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡)
                uniqueSubjects.set(sub.name, {
                    name: sub.name,
                    id: sub.id, // ID Ø§Ù„Ù…Ø§Ø¯Ø©
                    yearId: yearId, // ID Ø§Ù„Ø³Ù†Ø©
                    yearName: yearName
                });
            }
        });
    });

    subjectsList.innerHTML = '';

    if (uniqueSubjects.size === 0) {
      subjectsList.innerHTML = '<li class="loading">âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…ØªØ§Ø­Ø© Ù„Ø´Ø¹Ø¨ØªÙƒ.</li>';
      return;
    }
    
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù€ Map Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ø´Ø§Ù† Ù†Ù‚Ø¯Ø± Ù†Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡Ø§ Loop
    const sortedSubjects = Array.from(uniqueSubjects.values()).sort((a, b) => a.name.localeCompare(b.name));


    sortedSubjects.forEach(subjectData => {
      const li = document.createElement('li');
      const circle = document.createElement('div');
      circle.className = 'circle';
      const img = document.createElement('img');
      img.src = subjectImages[subjectData.name] || 'https://img.icons8.com/ios-filled/100/ffd700/book.png';
      circle.appendChild(img);
      const span = document.createElement('span');
      span.textContent = subjectData.name;
      li.appendChild(circle);
      li.appendChild(span);
      
      // ğŸš¨ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© Ø§Ù„Ù…ÙØ¹Ù„Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„Ù€ IDs
      li.onclick = () => {
          // Ù†Ø¨Ø¹Øª yid (Year ID) Ùˆ sid (Subject ID)
          const url = `teachers.html?yid=${subjectData.yearId}&sid=${subjectData.id}`;
          window.location.href = url;
      };
      
      subjectsList.appendChild(li);
    });

    showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø¬Ø§Ø­");
  } catch (err) {
    subjectsList.innerHTML = `<li class="loading">âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….</li>`;
    console.error(err);
  }
}

// ğŸš€ ØªØ´ØºÙŠÙ„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯
loadSubjects();
</script>

</body>
</html>
