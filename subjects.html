<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© | Full Mark</title>
  
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
  <script type="module" src="devcheck.js"></script>
  <script src="auth.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Tajawal:wght@400;700;900&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* =========================================
       1. Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† (Theming System)
       ========================================= */
    :root {
      /* ğŸ”µ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø§Ù„Ø­ÙˆØª Ø§Ù„Ø£Ø²Ø±Ù‚ - Dark) */
      --bg-main: #020617;          
      --card-bg: rgba(15, 23, 42, 0.7); 
      --card-hover: rgba(15, 23, 42, 0.95);
      --accent-color: #00f3ff;      
      --accent-dim: #0099a0;
      --text-main: #e2e8f0;       
      --text-sec: #94a3b8;
      --border-color: rgba(0, 243, 255, 0.2);
      
      --bg-image: 
          radial-gradient(circle at 50% 0%, #1e293b 0%, var(--bg-main) 80%),
          linear-gradient(0deg, rgba(0,243,255,0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0,243,255,0.03) 1px, transparent 1px);
    }

    /* â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ (Light Mode) */
    [data-theme="light"] {
      --bg-main: #f0f9ff;          
      --card-bg: rgba(255, 255, 255, 0.9);
      --card-hover: #ffffff;
      --accent-color: #0284c7;      /* Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚ Ù„ÙŠÙƒÙˆÙ† ÙˆØ§Ø¶Ø­Ø§Ù‹ */
      --accent-dim: #bae6fd;
      --text-main: #0f172a;       
      --text-sec: #475569;
      --border-color: rgba(2, 132, 199, 0.2);

      --bg-image: 
          radial-gradient(circle at 50% 0%, #bae6fd 0%, #f0f9ff 80%),
          linear-gradient(0deg, rgba(2,132,199,0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(2,132,199,0.05) 1px, transparent 1px);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 90px 15px 70px;
      font-family: 'Cairo', sans-serif;
      background-color: var(--bg-main);
      background-image: var(--bg-image);
      background-size: 100% 100%, 50px 50px, 50px 50px;
      color: var(--text-main);
      margin: 0;
      overflow-x: hidden;
      min-height: 100vh;
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± (Topbar) --- */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--card-bg); 
      backdrop-filter: blur(15px); 
      padding: 10px 20px;
      position: fixed;
      top: 0; right: 0; left: 0;
      z-index: 1000;
      border-bottom: 2px solid var(--accent-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      transition: background 0.3s;
    }

    .title {
      font-size: 16px;
      color: var(--accent-color);
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      letter-spacing: 2px;
      text-shadow: 0 0 5px var(--border-color);
    }

    .icons { display: flex; align-items: center; gap: 15px; }
    
    /* Ø²Ø± Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
    .theme-btn {
        width: 35px; height: 35px;
        border-radius: 50%;
        display: flex; justify-content: center; align-items: center;
        background: rgba(128, 128, 128, 0.15);
        cursor: pointer;
        transition: 0.3s;
        border: 1px solid var(--border-color);
        color: var(--text-main);
    }
    .theme-btn:hover {
        background: var(--accent-color);
        color: var(--bg-main);
        box-shadow: 0 0 15px var(--accent-color);
    }

    .icons img { 
        width: 28px; height: 28px; 
        filter: drop-shadow(0 0 2px var(--accent-color)); 
        cursor: pointer; 
        transition: transform 0.3s;
    }
    .icons img:hover { transform: scale(1.1); }
    /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
    [data-theme="light"] .icons img { filter: none; }

    /* --- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† --- */
    h1 {
      color: var(--accent-color);
      text-align: center;
      font-size: 3rem;
      margin-bottom: 50px;
      text-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
      font-family: 'Orbitron', sans-serif;
      font-weight: 900;
    }

    /* --- Ø§Ù„Ø´Ø¨ÙƒØ© --- */
    ul {
      padding: 0 10px;
      list-style: none;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, minmax(250px, 1fr));
      gap: 30px;
    }

    /* --- ÙƒØ§Ø±Øª Ø§Ù„Ù…Ø§Ø¯Ø© --- */
    li {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 30px 25px;
      cursor: pointer;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 250px;
      position: relative;
      overflow: hidden;
    }

    li:hover {
      background: var(--card-hover);
      transform: translateY(-8px);
      border-color: var(--accent-color);
      box-shadow: 0 15px 50px rgba(0, 243, 255, 0.2);
    }

    /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØµÙˆØ±Ø© */
    .circle {
      width: 120px; height: 120px; border-radius: 50%;
      background: rgba(0,0,0,0.2);
      margin-bottom: 25px;
      border: 3px solid var(--accent-color);
      box-shadow: 0 0 15px var(--accent-color);
      display: flex; justify-content: center; align-items: center;
      transition: 0.3s;
    }
    
    li:hover .circle {
        box-shadow: 0 0 30px var(--accent-color);
        transform: scale(1.05);
    }

    .circle img { 
        width: 75%; height: 75%; 
        object-fit: contain; 
        filter: drop-shadow(0 0 5px rgba(255,255,255,0.3)); 
    }

    li span { 
        font-weight: 700; font-size: 1.4rem; font-family: 'Tajawal', sans-serif; 
        color: var(--text-main);
        z-index: 2;
    }

    /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    li.loading { 
        grid-column: 1 / -1; text-align: center; color: var(--text-sec); font-size: 1.3rem;
        background: transparent; border: none; box-shadow: none;
    }
    li.loading::after {
      content: ""; width: 35px; height: 35px; border: 4px solid var(--accent-color);
      border-top: 4px solid transparent; border-radius: 50%; display: inline-block;
      margin-right: 15px; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Ø²Ø± Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø¹Ø§Ø¦Ù… */
    .profile-float-btn {
      position: fixed; bottom: 30px; left: 30px; width: 60px; height: 60px;
      border-radius: 50%; 
      background: var(--card-bg); 
      border: 3px solid var(--accent-color);
      display: flex; justify-content: center; align-items: center; z-index: 1200;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      backdrop-filter: blur(5px);
      transition: 0.3s;
    }
    .profile-float-btn:hover { 
        transform: scale(1.1) rotate(10deg); 
        box-shadow: 0 0 35px var(--accent-color);
    }
    .profile-float-btn img { 
        width: 30px; height: 30px; filter: invert(1); transition: 0.3s; 
    }
    [data-theme="light"] .profile-float-btn img { filter: none; }

    /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙˆØ³Øª Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ… (Override JS Styles) */
    .custom-toast {
        background: var(--card-bg) !important;
        color: var(--text-main) !important;
        border-color: var(--accent-color) !important;
        backdrop-filter: blur(10px) !important;
    }
    
    @media (max-width: 480px) {
        ul { grid-template-columns: 1fr; }
        h1 { font-size: 1.8rem; }
    }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="title">By ELGIZAWY</div>
    <div class="icons">
      <div class="theme-btn" id="themeToggle">
        <i class="fas fa-sun"></i>
      </div>

      <div class="toggle-dark" id="darkToggle" style="display:none"></div> <a href="" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp">
      </a>
      <img id="shareBtn" src="https://cdn-icons-png.flaticon.com/512/929/929610.png" alt="Share">
    </div>
  </div>

  <h1> SUBJECTS 2026 </h1>
  
  <ul id="subjects-list">
    <li class="loading">â³....ğ‘³ğ’ğ’‚ğ’…ğ’Šğ’ğ’ˆ</li>
  </ul>

  <a href="profile.html" class="profile-float-btn">
    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
  </a>

<script>
  const themeBtn = document.getElementById('themeToggle');
  const themeIcon = themeBtn.querySelector('i');
  const body = document.body;

  // 1. Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'light') {
      body.setAttribute('data-theme', 'light');
      themeIcon.classList.replace('fa-sun', 'fa-moon');
  }

  // 2. ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
  themeBtn.onclick = () => {
      if (body.getAttribute('data-theme') === 'light') {
          // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„ÙŠÙ„ÙŠ (Ø£Ø²Ø±Ù‚)
          body.removeAttribute('data-theme');
          localStorage.setItem('theme', 'dark');
          themeIcon.classList.replace('fa-moon', 'fa-sun');
      } else {
          // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ù†Ù‡Ø§Ø±ÙŠ
          body.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
          themeIcon.classList.replace('fa-sun', 'fa-moon');
      }
  };
</script>

<script>
// âœ… Toast Ø§Ø­ØªØ±Ø§ÙÙŠØ©
function showToast(message, type = "info") {
  const toast = document.createElement("div");
  toast.className = `custom-toast ${type}`;
  toast.innerHTML = `<span>${message}</span>`;
  const style = document.createElement("style");
  style.textContent = `
    .custom-toast { position: fixed; bottom: 20px; right: 20px; padding: 14px 22px; border-radius: 14px; font-family: "Cairo", sans-serif; color: #fff; z-index: 9999; border: 1px solid #27d97e; display:flex; align-items:center; animation: slideIn 0.5s ease; }
    .custom-toast.info { background: #08402C; }
    .custom-toast.success { background: #27d97e; }
    @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }
  `;
  document.head.appendChild(style);
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}
</script>

<script type="module">
// ğŸŒ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙØ§ÙŠØ±Ø¨ÙŠØ² (Ø§Ø³ØªØ®Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚)
const firebaseConfig = {
    apiKey: "AIzaSyBK6FZF3LW83qaUHBKYTfiVd2Ozrd1Rf2g",
    authDomain: "thanawy-1383.firebaseapp.com",
    databaseURL: "https://thanawy-1383-default-rtdb.firebaseio.com",
    projectId: "thanawy-1383",
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const subjectsList = document.getElementById('subjects-list');

const subjectImages = {
    "Ø£Ø­ÙŠØ§Ø¡": "1.jpg",
    "ÙÙŠØ²ÙŠØ§Ø¡": "2.jpg",
    "ÙƒÙŠÙ…ÙŠØ§Ø¡": "3.jpg",
    "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©": "5.jpg",
    "English": "6.jpg",
    "Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ§": "https://www2.0zz0.com/2025/11/03/22/343667596.jpg",
    "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": "4.jpg",
    "ØªØ§Ø±ÙŠØ®": "99.jpg",
    "Ø¬ØºØ±Ø§ÙÙŠØ§": "9.jpg",
    "Ø§Ù„Ø¥Ø­ØµØ§Ø¡": "8.jpg",
    "Ø§Ø¯Ø¨ÙŠ": "https://www2.0zz0.com/2025/10/01/19/580067879.jpeg",
    "Le franÃ§ais": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQAlAMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAAMEBgcBAgj/xABCEAACAQMDAgQEAwUFBQkBAAABAgMABBEFEiEGMRNBUWEUInGBBzKRFSNCobEWUtHh8CRicoLBJjM2Y5KistLxJf/EABsBAAIDAQEBAAAAAAAAAAAAAAMEAQIFBgcA/8QAKREAAgICAgEEAQMFAAAAAAAAAQIAEQMhBBIxEyJBUTIFYcEjNFKBof/aAAwDAQACEQMRAD8Aq00jJtRNu9+c98CkqkNhiS3fOaW1TK7YA9/pT0UMfgT3E91FDHEBkyNyxPkB510LuqDsx1OexYmyEIg3G8ADA7e5zXcA15hminj3xOGXPlROWGyXSUlMiwyplpJGJO7/AHQPWidhV/EC1q3UjcFlQPLFWX8NXSLq22d8hVjlJ4zxtNVkyRyKDG4YEA5FWX8MtzdXQBDhhFIQf+U0DMwbCSDG8eNkzBWFG5t6OJI1YZAYAgMMED3rv1qu9T2Wtz3On3GjXaxpBKGngbgSL9R7eVH0YlQWGD51ztzoCtAG5648u9KoTWH/APUW/WeYHwjG0RPyMO+frXiz1a1vNQvbCJ8XFmU8RCecMoZT9OT+lVBPzIIk4gHuM0sADA4oNf8AUlnYa7aaRcLIJroEo+PlHoD9eaM5qZJUrV/Mpv4o5Xpj5mJ/2lOSPrWTAhgMGtH/ABWupBbW9m53K534z32kVnl1cG6ujO0UUWVC7Il2jgd8UpmPunX/AKIGXjDWiTPFKu0qXubnWeW7dq8EZFOEV4PFWBgHWo0RzXK6/BH0pVaoCdTAzjuSc1D1ayS6tyTneowvPapMZ4zU/TdPutUnaCyhMsqxtIVHfaO9duwUqe3ieOozKwK+ZVNOjmtH+aTKZ/LRO/iF1b5AXI/Wu3FuY5DlNpU4KkYIpRMw3AjJPlQhjATofEMczdw48iCrVbmK4y/5cbQBV6/Dy+Ww6ngnlUFRFIDg+q5/Xy+9VuK2adn8MJ8qF23MBwKL9EAS9QWyA4DK4BHn8poPRUxsgMM2R8rrlYeT5n0MfSuCgOoWetf2mtL20vE/ZoUrPbtn9R6+X0o8O3PesKbJUDwZX+pOqNK0pZbO5vFiunibYMZwccZ9KzbpnXHk6/vtUmZktvCUXDY4xsG3PvkcVedY6G0u81641q6iNyJISJLZ+V3AfmXHOTiqD0do+lavr2o6ZdxyOIY91ssgOFYjBJ7EsAFH2qlG4RSKmu2dxp+s2sF/atFcRHJjk28qc4PfkHjBqZG6OD4bKwBxkHPIqtdEdNy9NWL2j3PjhpC2QMYzUzprpy26cS4isZZGhmffsfyPqT5n3PPAogArcASb1Kz+KtvlbW5GMhSjcc/mGP61mrErz3Y/yrVvxNtXn9MOHauqxUgqSCPMHFec43Y12RNip5ZW5zqayhtbZJ7Vdp8Xk5J/vf4CpPTlmdWZkMvh7I9/ChiTkAcZHGSMnyp3qIvNpEi8kqA4B9mU/0Y/wCu
};
  
const JSON_URLS = {
    'Ø¹Ù„Ù…ÙŠ Ø¹Ù„ÙˆÙ…': "https://plus-teal.vercel.app/organized_output.json",
    'Ø£Ø¯Ø¨ÙŠ': "https://plus-teal.vercel.app/organized_output-a.json", 
    'Ø¹Ù„Ù…ÙŠ Ø±ÙŠØ§Ø¶Ø©': "https://platform-sigma-seven.vercel.app/organized_output-e.json", 
    'Ø£Ø²Ù‡Ø±': "https://plus-teal.vercel.app/organized_output.json", 
    'Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ': "https://plus-teal.vercel.app/organized_output.json"
};
  
async function getDataSourceURL() {
    const activeCode = localStorage.getItem('activeCode');
    if (!activeCode) return JSON_URLS['Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ'];

    try {
        const snapshot = await db.ref(`approvedStudents/${activeCode}`).once('value');
        const studentData = snapshot.val();
        if (studentData && studentData.section) {
            return JSON_URLS[studentData.section.trim()] || JSON_URLS['Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ'];
        }
        return JSON_URLS['Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ'];
    } catch (error) {
        console.error("Firebase Error:", error);
        return JSON_URLS['Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ'];
    }
}

async function loadSubjects() {
  try {
    // 1. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¹Ø¨Ø©
    const finalSourceURL = await getDataSourceURL();
    
    // 2. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø§Ù„Ù…Ø®ØªØ§Ø±
    const res = await fetch(finalSourceURL);
    if (!res.ok) throw new Error("Failed to fetch data");
    const data = await res.json();

    // 3. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ù†Ø© 3 ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø®ØªØ§Ø±
    const year = data.find(y => y.id === 3 || y.id === "3" || y.name === "3");

    if (!year) {
      subjectsList.innerHTML = `<li class="loading">âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</li>`;
      return;
    }

    subjectsList.innerHTML = "";

    // 4. Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯
    year.subjects.forEach(subject => {
      const li = document.createElement("li");
      const circle = document.createElement("div");
      circle.className = "circle";
      const img = document.createElement("img");
      img.src = subjectImages[subject.name] || "https://img.icons8.com/ios-filled/100/ffd700/book.png";
      circle.appendChild(img);

      const span = document.createElement("span");
      span.textContent = subject.name;

      li.append(circle, span);

      // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ†
      li.onclick = () => {
        window.location.href = `teachers.html?yid=${year.id}&sid=${subject.id}`;
      };

      subjectsList.appendChild(li);
    });

    showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø¬Ø§Ø­", "success");

  } catch (err) {
    console.error(err);
    subjectsList.innerHTML = `<li class="loading">âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>`;
  }
}

loadSubjects();
</script>

</body>
</html>
